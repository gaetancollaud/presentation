<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Angular 2 - What's new compare to angular 1</title>

	<meta name="description" content="A short description of Java 8 Features">
	<meta name="author" content="Gaétan Collaud">

	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

	<meta name="viewport"
		  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet"
		  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/css/reveal.min.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/lib/css/zenburn.min.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/css/theme/night.min.css"/>
	<!--<link rel="stylesheet"-->
	<!--href="http://slidifylibraries2.googlecode.com/git/inst/libraries/widgets/bootstrap/css/bootstrap.css">-->


	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ?
			'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/css/print/pdf.min.css' :
			'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/css/print/paper.min.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
	<style>
		.reveal {
			font-size: 38px;
		}
	</style>

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>

<div class="reveal">

	<!-- Any section element inside of this container is displayed as a slide -->
	<div class="slides">
		<section>
			<h1>Angular 2</h1>
			<h2>and beyond</h2>
			<p>
				<small>
					<a href="http://collaud.net">Gaétan Collaud</a> / <a href="http://morphean.ch">Morphean</a>
				</small>
			</p>
		</section>

		<section>
			<h2>Angular</h2>
			<ul>
				<li>Typescript</li>
				<li>Easy lazy loading</li>
				<li>Can be compiled during build (AOT vs JIT)</li>
				<li>From scratch based on the experience of AngualrJS</li>
				<li>Can be render on server side</li>
			</ul>
		</section>

		<section>
			<section>
				<h2>Components</h2>
				<ul>
					<li><s>Directive</s></li>
					<li><s>Controler</s></li>
					<li><s>Scope</s></li>
					<li style="margin-top:1em"><b><u>Component</u></b></li>
				</ul>
			</section>
			<section>
				<h2>Components</h2>
				<ul>
					<li>selector</li>
					<li>inputs</li>
					<li>outputs</li>
					<li>template</li>
				</ul>
				<p>Every graphical element is a component</p>
				<p><a href="https://angular.io/api/core/Component">Doc: Component</a></p>
			</section>

			<section>
				<h2>Hello component</h2>
				<pre><code data-trim class="typescript">
@Component({
	selector: 'greet',
	template: 'hello.html'
})
class Greet {
	@Input
	public name: string = 'World';
}
					</code></pre>
				<pre><code data-trim class="typescript">
<h1>Hello {{name}}!</h1>
					</code></pre>
				</code></pre>
				<br/>
				<pre><code data-trim class="typescript">
<greet name="John"></greet>
					</code></pre>
			</section>

			<section>
				<h2>Service in component</h2>
				<pre><code data-trim class="typescript">
@Component({
	selector: 'greet',
	template: 'hello.html'
})
class Greet implements OnInit {

	public name: string = 'World';

	constructor(private currentUserService:CurrentUserApiService){
	}

	public ngOnInit(){
		this.currentUserService.getCurrentUser()
			.subscribe((u) => this.name = u.firstname);
	}
}
					</code></pre>

			</section>

			<section>
				<h2>Binding: parent -> child</h2>
				<pre><code data-trim class="typescript">
@Component({
	selector: 'my-component',
})
class MyComponent {
	@Input
	public name: string = 'World';

	public dummy():void{
		console.log(`input is ${this.name}`);
	}
}
				</code></pre>
				<br/>
				<pre><code data-trim class="html">
					<my-component name="staticValue"></my-component>
					<my-component [name]="myVarFieldInParent"></my-component>
				</code></pre>
			</section>
			<section>
				<h2>Binding: child -> parent</h2>
				<pre><code data-trim class="typescript">
@Component({
	selector: 'my-component',
})
class MyComponent {
	@Output
	public nameChange: EventEmitter< string > = new EventEmitter();

	public dummy():void{
		nameChange.emit('new name');
	}
}
				</code></pre>
				<br/>
				<pre><code data-trim class="html">
					<my-component (name)="fieldInParent"></my-component>
					<my-component (name)="callbackFunctionInParent(name)"></my-component>
				</code></pre>
			</section>
			<section>
				<h2>Binding: child <-> parent</h2>
				<pre><code data-trim class="typescript">
@Component({
	selector: 'my-component',
})
class MyComponent {
	@Input
	public name;

	@Output
	public nameChange: EventEmitter< string > = new EventEmitter();
}
				</code></pre>
				<br/>
				<pre><code data-trim class="html">
					<my-component [(name)]="fieldInParent"></my-component>
				</code></pre>
				<p class="alert alert-warning">Two-way binding not recommended</p>
			</section>

			<section>
				<h2>Component reference</h2>
				<pre><code data-trim class="typescript">
@Component({selector: 'my-parent'})
class ParentComponent implements OnInit, AfterViewInit {
	@ViewChild(ChildDirective)
	private child: ChildComponent;

	public ngOnInit(){
		//child not set yet !
	}

	ngAfterViewInit() {
		// child is set, we can call it
	}
}
				</code></pre>

			</section>

			<section>
				<h2>Lifecycle</h2>
				<img src="images/component-lifecycle.png"/>
				<p><a href="https://angular.io/guide/lifecycle-hooks">Doc: Lifecycle Hoooks</a></p>
			</section>
		</section>

		<section>
			<section>
				<h2>Directives</h2>
				<ul>
					<li>Similar to component</li>
					<li>Do not contain a template</li>
					<li>Have no graphical content</li>
					<li>Used to extends a dom element (that can be a component)</li>
				</ul>
			</section>
			<section>
				<h2>Directive: Ng-If</h2>
				<pre><code data-trim class="typescript">
@Directive({selector: '[ng-if]', properties: ['ngIf']})
export class NgIf {
	viewContainer: ViewContainerRef;
	protoViewRef: ProtoViewRef;
	prevCondition: boolean;

	constructor(viewContainer: ViewContainerRef, protoViewRef: ProtoViewRef) {
		this.viewContainer = viewContainer;
		this.prevCondition = null;
		this.protoViewRef = protoViewRef;
	}

	set ngIf(newCondition: boolean) {
		if (newCondition && (isBlank(this.prevCondition) || !this.prevCondition)) {
			this.prevCondition = true;
			this.viewContainer.create(this.protoViewRef);
		} else if (!newCondition && (isBlank(this.prevCondition) || this.prevCondition)) {
			this.prevCondition = false;
			this.viewContainer.clear();
		}
	}
}
				</code></pre>
			</section>
		</section>

		<section>
			<section>
				<h2>Pipes</h2>
				<ul>
					<li>Replacement of AngularJS filter</li>
					<li>Used to embellish a variable</li>
					<li>Can be asynchronous</li>
					<li>Can work with any type</li>
					<li>Can accept parameter</li>
					<li>Can be chained</li>
				</ul>
			</section>
			<section>
				<h2>Built-in pipes</h2>
				<ul>
					<li>async</li>
					<li>json</li>
					<li>uppercase / lowercase / titlecase</li>
					<li>currency</li>
					<li>date</li>
					<li>slice</li>
					<li>...</li>
				</ul>
			</section>
			<section>
				<h2>Async pipe</h2>
				<pre><code data-trim class="html">
<p>async value: {{ observableOrPromise | async }}</p>
				</code></pre>
			</section>
			<section>
				<h2>Usage</h2>
				<pre><code data-trim class="typescript">
import { Pipe, PipeTransform } from '@angular/core';

@Pipe({
	name: 'exponentialStrength'
})
export class ExponentialStrengthPipe implements PipeTransform {

	transform(value: number, exponent: string): number {
		let exp = parseFloat(exponent);
		return Math.pow(value, isNaN(exp) ? 1 : exp);
	}
}
				</code></pre>
				<pre><code data-trim class="html">
					<p>squared: {{myNumber | exponentialStrength: 2}}</p>
				</code></pre>
			</section>
		</section>
		<section>
			<section>
				<h2>Services</h2>
				<ul>
					<li>Can be injected in components</li>
					<li>Can be injected in other services</li>
					<li>Is a singleton (unless you declare it multiple times in the dependencies tree)</li>
					<li>Useful to manage data</li>
					<li>Can be easily unit-tested</li>
				</ul>
			</section>
			<section>
				<h2>Services</h2>
				<pre><code data-trim class="typescript">
@Injectable()
class UsefulService {
}

@Injectable()
class NeedsService {
	constructor(public service: UsefulService) {}
}

//in unit test
const injector = ReflectiveInjector
	.resolveAndCreate([NeedsService, UsefulService]);
expect(injector.get(NeedsService).service instanceof UsefulService)
	.toBe(true);
				</code></pre>
			</section>
		</section>
	</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/lib/js/head.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/js/reveal.min.js"></script>

<script>

	// Full list of configuration options available at:
	// https://github.com/hakimel/reveal.js#configuration
	Reveal.initialize({
		controls: false,
		progress: true,
		history: true,
		center: true,
		hideAddressBar: true,
//				parallaxBackgroundImage: 'background/reveal-parallax-1.jpg', // e.g. "https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg"
//				parallaxBackgroundSize: '2100px 900px', // CSS syntax, e.g. "2100px 900px" - currently only pixels are supported (don't use % or auto)
//				parallaxBackgroundHorizontal: 200,
//				parallaxBackgroundVertical: 50,
		transition: 'none', // none/fade/slide/convex/concave/zoom

		// Optional reveal.js plugins
		dependencies: [
			{
				src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/lib/js/classList.js',
				condition: function () {
					return !document.body.classList;
				}
			},
			{
				src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/plugin/markdown/marked.js',
				condition: function () {
					return !!document.querySelector('[data-markdown]');
				}
			},
			{
				src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/plugin/markdown/markdown.min.js',
				condition: function () {
					return !!document.querySelector('[data-markdown]');
				}
			},
			{
				src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/plugin/highlight/highlight.min.js',
				async: true,
				condition: function () {
					return !!document.querySelector('pre code');
				},
				callback: function () {
					hljs.initHighlightingOnLoad();
				}
			},
			{src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.5.0/plugin/zoom-js/zoom.min.js', async: true},
			{src: 'http://cdn.rawgit.com/hakimel/reveal.js/3.5.0/plugin/notes/notes.js', async: true}
		]
	});

</script>

</body>
</html>
